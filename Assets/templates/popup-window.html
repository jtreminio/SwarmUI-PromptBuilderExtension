<!DOCTYPE html>
<html>
<head>
    <title>Prompt Builder</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }
        #pb-popup-app {
            width: 100vw;
            height: 100vh;
        }
        .pb-prompt-builder-container {
            height: 100vh !important;
            max-height: none !important;
        }
    </style>
    {{stylesheets}}
    <link rel="stylesheet" href="/ExtensionFile/PromptBuilderExtension/Assets/prompt-builder.css?vary={{timestamp}}">
</head>
<body>
    <div id="pb-popup-app"></div>
    <script>
        // Store state to restore after script loads
        window.promptBuilderState = {{state}};
        
        // Make parent window functions available
        window.genericRequest = function(...args) {
            return window.opener.genericRequest(...args);
        };
    </script>
    <script src="/ExtensionFile/PromptBuilderExtension/Assets/prompt-builder.js?vary={{timestamp}}"></script>
    <script>
        // After the script loads, initialize with saved state
        window.addEventListener('load', () => {
            if (window.promptBuilderPopupInit) {
                window.promptBuilderPopupInit(window.promptBuilderState);
            }
        });
    </script>
</body>
</html>
